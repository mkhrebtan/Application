<div class="flex flex-col gap-6">
  <section class="flex items-center justify-between">
    <div class="flex gap-4 items-center">
      <button
        class="px-3 pt-1 pb-1 border border-gray-300 shadow-sm rounded-4xl hover:bg-gray-200 cursor-pointer"
        (click)="decrementDate()"
      >
        <fa-icon [icon]="faChevronLeft" class="text-sm" />
      </button>
      <span class="text-xl font-semibold">{{
          viewMode() === calendarViewMode.Month
            ? (currentDate() | date: 'MMMM yyyy')
            : getWeekRange()
        }}</span>
      <button
        class="px-3 pt-1 pb-1 p-1 border border-gray-300 shadow-sm rounded-4xl hover:bg-gray-200 cursor-pointer"
        (click)="incrementDate()"
      >
        <fa-icon [icon]="faChevronRight" class="text-sm" />
      </button>
    </div>
    <app-view-toggle [options]="calendarViewOptions" [(value)]="viewMode" />
  </section>

  @if (viewMode() === calendarViewMode.Month) {
    <section class="shadow-sm rounded-b-xl">
      <div
        class="grid grid-cols-7 text-center bg-gray-200 border-b rounded-t-xl border-gray-300"
      >
        @for (day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']; track day) {
          <div class="p-2">{{ day }}</div>
        }
      </div>
      <div class="rounded-b-xl border-l border-b border-r border-gray-300 overflow-hidden">
        @for (week of weeks(); track week) {
          <div class="grid grid-cols-7 border-b last:border-0 border-gray-300 max-h-35">
            @for (day of week; track day) {
              <app-day-card
                [date]="day"
                [events]="getEventsForDay(day)"
                [viewMode]="viewMode()"
                [isDisplayedMonth]="isDisplayedMonth(day)"
                class="border-r border-gray-300 last:border-0"
              />
            }
          </div>
        }
      </div>
    </section>
  }

  @if (viewMode() === calendarViewMode.Week) {
    <section class="grid grid-cols-7 gap-4">
      @for (day of currentWeek(); track day) {
        <app-day-card
          [date]="day"
          [events]="getEventsForDay(day)"
          [viewMode]="viewMode()"
          [isDisplayedMonth]="isDisplayedMonth(day)"
        />
      }
    </section>
  }
</div>
