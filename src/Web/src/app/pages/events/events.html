<div class="pt-8 pb-8 flex flex-col gap-10">
  <app-hero-section [description]="heroDescription" [title]="heroTitle"/>
  <section class="flex items-center justify-between">
    <!--          <h2 class="text-2xl">Upcoming Events</h2>-->
    <div class="flex items-center gap-8 w-full h-full">
      <div class="relative flex items-center min-w-1/4">
        <fa-icon [icon]="faMagnifyingGlass" class="absolute left-4 text-gray-400"/>
        <input
          class="w-full pt-2 pb-2 pr-2 pl-12 placeholder:text-gray-400 border rounded-4xl border-gray-300 shadow-sm focus:outline-none focus:border-gray-400"
          id="eventSearch"
          placeholder="Search events..."
          type="text"
        />
      </div>
      <div class="flex gap-2">
        <button
          (click)="selectFilter(Filter.AllEvents)"
          [class.active]="selectedFilter() === Filter.AllEvents"
          class="relative overflow-hidden px-3 cursor-pointer before:content-['']
                    before:absolute before:bottom-0 before:left-1/2 before:w-0 before:h-px before:bg-gray-300 before:transition-all before:duration-300
                    hover:not-[&.active]:before:w-11/12 hover:not-[&.active]:before:left-[5%]
                    [&.active]:before:w-11/12 [&.active]:before:left-[5%] [&.active]:font-semibold [&.active]:before:bg-black"
        >
          All Events
        </button>
        <button
          (click)="selectFilter(Filter.Today)"
          [class.active]="selectedFilter() === Filter.Today"
          class="relative overflow-hidden px-3 cursor-pointer before:content-['']
                    before:absolute before:bottom-0 before:left-1/2 before:w-0 before:h-px before:bg-gray-300 before:transition-all before:duration-300
                    hover:not-[&.active]:before:w-11/12 hover:not-[&.active]:before:left-[5%]
                    [&.active]:before:w-11/12 [&.active]:before:left-[5%] [&.active]:font-semibold [&.active]:before:bg-black"
        >
          Today
        </button>
        <button
          (click)="selectFilter(Filter.Weekend)"
          [class.active]="selectedFilter() === Filter.Weekend"
          class="relative overflow-hidden px-3 cursor-pointer before:content-['']
                    before:absolute before:bottom-0 before:left-1/2 before:w-0 before:h-px before:bg-gray-300 before:transition-all before:duration-300
                    hover:not-[&.active]:before:w-11/12 hover:not-[&.active]:before:left-[5%]
                    [&.active]:before:w-11/12 [&.active]:before:left-[5%] [&.active]:font-semibold [&.active]:before:bg-black"
        >
          Weekend
        </button>
      </div>
    </div>
    <app-view-toggle [(value)]="viewMode" [options]="viewOptions"/>
  </section>
  <section [class.flex-col]="viewMode() === EventListingView.List"
           [class.flex]="viewMode() === EventListingView.List"
           [class.grid-cols-3]="viewMode() === EventListingView.Grid" [class.grid]="viewMode() === EventListingView.Grid"
           [class.max-w-5xl]="viewMode() === EventListingView.List"
           [class.self-center]="viewMode() === EventListingView.List"
           [class]="{ 'min-w-2/3': viewMode() === EventListingView.List }"
           class="gap-6">
    @let events = events$ | async;
    @if (events) {
      @for (event of events; track event.id) {
        <app-event-listing-card (joinClick)="onJoinEventClick($event)" [event]="event" [viewMode]="viewMode()"/>
      }

      @if (events.length === 0) {
        <p class="text-center col-span-4">No events found.</p>
      }
    }
  </section>
</div>

@if (joinEventDialogIsOpen()) {
  <app-join-event-dialog (closeDialog)="closeJoinEventDialog()" (joinEventSubmit)="onJoinEventFormSubmit()"/>
}
